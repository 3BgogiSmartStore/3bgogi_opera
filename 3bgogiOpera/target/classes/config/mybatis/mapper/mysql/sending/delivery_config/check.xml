<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="delivery.check">
	
	<select id="selectDelivNumCheckTarget" resultType="OrdersVO" parameterType="OrderSearchVO">
		SELECT
			or_delivery_invoice_number
		FROM
			orders
		<trim prefix="WHERE" prefixOverrides="AND |OR ">
			<if test="createInvoiceNumList != null and createInvoiceNumList.size != 0">			
				AND or_invoice_num_date IN
				<foreach collection="createInvoiceNumList" item="inoviceNum" open="(" close=")" separator=",">
						#{inoviceNum}
				</foreach>
			</if>
			<![CDATA[			
				AND or_sending_day >= DATE_FORMAT(NOW(), '%Y-%m-%d')
				AND or_sending_day < DATE_FORMAT( DATE_ADD(NOW(), INTERVAL 1 DAY) , '%Y-%m-%d')
			]]>
		</trim>
		GROUP BY
			or_delivery_invoice_number
	</select>
	
	
	<!-- 출입방법에 관한 쿼리 -->
	<insert id="insertDoorPassMsg" parameterType="DoorPassVO">
		INSERT INTO
			door_pass
				(
					dp_buyer_cnt,
					dp_receiver_cnt;
					dp_addr,
					dp_msg
				)
			VALUES(
					#{dpBuyerCnt},
					#{dpReceiverCnt},
					#{dpAddr},
					#{dpMsg}
			)
	</insert>
	
</mapper>








